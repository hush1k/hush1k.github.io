<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="hush!k dev" />
  <meta name="theme-color" content="#0b0f19" />
  <meta property="og:title" content="hush!k dev" />
  <meta property="og:description" content="portfolio" />
  <meta property="og:type" content="website" />
  <title>hush!k dev</title>

  <!-- favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="img/logo.png" />

  <style>
    :root{
      --bg:#0b0f19;
      --panel:#10182a;
      --panel2:#0f1627;
      --text:#eaf0ff;
      --muted:#a8b3d6;
      --line:rgba(255,255,255,.10);
      --accent:#7c5cff;
      --accent2:#2dd4bf;

      --radius:15px;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --shadow2: 0 10px 30px rgba(0,0,0,.25);

      --max: 1120px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    }

    [data-theme="light"]{
      --bg:#f6f7fb;
      --panel:#ffffff;
      --panel2:#ffffff;
      --text:#0b1222;
      --muted:#4a587a;
      --line:rgba(0,0,0,.10);
      --shadow: 0 20px 60px rgba(0,0,0,.10);
      --shadow2: 0 10px 30px rgba(0,0,0,.08);
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      line-height:1.5;
      letter-spacing:.2px;
      background: var(--bg);
      position: relative;
      overflow-x:hidden;
    }

    /* —Ñ–æ–Ω */
    body::before{
      content:"";
      position:fixed;
      inset:-2px;
      pointer-events:none;
      z-index:-2;
      background:
        radial-gradient(900px 620px at 10% -10%, rgba(124,92,255,.22), transparent 60%),
        radial-gradient(900px 620px at 90% 0%, rgba(45,212,191,.14), transparent 55%),
        radial-gradient(1000px 700px at 50% 120%, rgba(124,92,255,.12), transparent 62%),
        radial-gradient(900px 600px at 50% 30%, rgba(255,255,255,.05), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.03), transparent 35%),
        var(--bg);
      filter: saturate(1.05);
    }
    body::after{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:-1;
      background:
        radial-gradient(1200px 800px at 50% 15%, rgba(0,0,0,.20), transparent 60%),
        radial-gradient(1200px 900px at 50% 110%, rgba(0,0,0,.35), transparent 55%),
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='240' height='240' filter='url(%23n)' opacity='.10'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity:.55;
    }

    [data-theme="light"] body::before{
      background:
        radial-gradient(900px 620px at 10% -10%, rgba(124,92,255,.14), transparent 62%),
        radial-gradient(900px 620px at 90% 0%, rgba(45,212,191,.12), transparent 55%),
        radial-gradient(1000px 700px at 50% 120%, rgba(124,92,255,.10), transparent 62%),
        linear-gradient(180deg, rgba(0,0,0,.03), transparent 35%),
        var(--bg);
      filter:saturate(1.02);
    }
    [data-theme="light"] body::after{
      mix-blend-mode: multiply;
      opacity:.22;
    }

    a{color:inherit;text-decoration:none}
    .container{max-width:var(--max); margin:0 auto; padding:0 20px}

    .skip{
      position:absolute; left:-999px; top:10px;
      background:var(--panel); border:1px solid var(--line);
      padding:10px 12px; border-radius:12px; z-index:9999;
    }
    .skip:focus{left:20px}

    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter:saturate(1.1) blur(14px);
      background:rgba(10,14,26,.55);
      border-bottom:1px solid var(--line);
    }
    [data-theme="light"] header{ background:rgba(246,247,251,.72); }

    .nav{
      display:flex; align-items:center; justify-content:space-between;
      height:68px;
    }
    .brand{
      display:flex; gap:12px; align-items:center; font-weight:700;
      letter-spacing:.4px;
    }

    /* –õ–û–ì–û */
    .logoImg{
      width:34px; height:34px;
      border-radius:12px;
      display:block;
      border:1px solid var(--line);
      box-shadow: 0 10px 30px rgba(124,92,255,.20);
      object-fit:cover;
      background: rgba(255,255,255,.06);
    }

    .navlinks{display:flex; gap:18px; align-items:center}
    .navlinks a{
      padding:10px 12px; border-radius:12px;
      color:var(--muted);
    }
    .navlinks a:hover{background:rgba(255,255,255,.06); color:var(--text)}
    [data-theme="light"] .navlinks a:hover{background:rgba(0,0,0,.05)}

    .navactions{display:flex; gap:10px; align-items:center}
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease;
      display:inline-flex; gap:10px; align-items:center;
    }
    [data-theme="light"] .btn{background:rgba(0,0,0,.04)}
    .btn:hover{transform: translateY(-1px); background:rgba(255,255,255,.10)}
    [data-theme="light"] .btn:hover{background:rgba(0,0,0,.06)}
    .btn.primary{
      border:0;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:#091023;
      font-weight:700;
    }
    .btn.primary:hover{filter:brightness(1.05)}
    .pill{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--muted);
      font-size:12px;
    }

    .hero{padding:64px 0 28px}
    .heroGrid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:16px;
      align-items:stretch;
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow2);
    }
    [data-theme="light"] .card{background:linear-gradient(180deg,#fff,#fff)}
    .heroMain{padding:24px}
    .kicker{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      margin-bottom:10px;
    }
    h1{
      margin:0 0 10px;
      font-size: clamp(28px, 4vw, 46px);
      line-height:1.08;
      letter-spacing:-.8px;
    }
    .lead{
      margin:0 0 16px;
      color:var(--muted);
      font-size:16px;
      max-width:60ch;
    }
    .heroStats{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:12px;
      margin-top:16px;
    }
    .stat{
      padding:14px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
    }
    [data-theme="light"] .stat{background:rgba(0,0,0,.03)}
    .stat b{display:block; font-size:18px}
    .stat span{color:var(--muted); font-size:12px}
    .heroSide{padding:18px; display:flex; flex-direction:column; gap:12px}
    .mini{
      padding:14px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
    }
    [data-theme="light"] .mini{background:rgba(0,0,0,.03)}
    .mini h3{margin:0 0 8px; font-size:14px}
    .mini p{margin:0; color:var(--muted); font-size:13px}

    section{padding:44px 0}
    .sectionHead{
      display:flex; justify-content:space-between; align-items:flex-end;
      gap:14px; margin-bottom:16px; flex-wrap:wrap;
    }
    .sectionHead h2{margin:0; font-size:20px; letter-spacing:-.2px}
    .sectionHead p{margin:0; color:var(--muted); max-width:70ch}

    .toolbar{
      display:flex; gap:12px; flex-wrap:wrap;
      align-items:center;
      background:rgba(255,255,255,.04);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:14px;
    }
    [data-theme="light"] .toolbar{background:rgba(0,0,0,.03)}
    .search{
      flex:1;
      min-width:220px;
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.05);
    }
    [data-theme="light"] .search{background:rgba(0,0,0,.03)}
    .search input{
      width:100%;
      border:0; outline:0;
      background:transparent;
      color:var(--text);
      font-size:14px;
    }

    .filters{display:flex; gap:8px; flex-wrap:wrap}
    .chipBtn{
      padding:9px 11px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--muted);
      cursor:pointer;
      font-size:13px;
      transition: background .12s ease, transform .12s ease, border-color .12s ease, opacity .12s ease;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }
    [data-theme="light"] .chipBtn{background:rgba(0,0,0,.03)}
    .chipBtn:hover{transform: translateY(-1px)}
    .chipBtn[aria-pressed="true"]{
      background:rgba(124,92,255,.20);
      color:var(--text);
      border-color: rgba(124,92,255,.45);
    }
    .chipCount{
      font-size:12px;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--muted);
    }
    [data-theme="light"] .chipCount{background:rgba(0,0,0,.04)}

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
      margin-top:16px;
    }
    .proj{
      padding:16px;
      border-radius:var(--radius);
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      box-shadow:var(--shadow2);
      display:flex; flex-direction:column; gap:10px;
      min-height: 200px;
      position:relative;
      overflow:hidden;
    }
    [data-theme="light"] .proj{background:#fff}
    .proj::before{
      content:"";
      position:absolute; inset:-80px -80px auto auto;
      width:160px; height:160px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(124,92,255,.22), transparent 60%);
      pointer-events:none;
    }
    .projTop{display:flex; align-items:flex-start; justify-content:space-between; gap:10px;}
    .proj h3{margin:0; font-size:16px; letter-spacing:-.2px}
    .proj p{margin:0; color:var(--muted); font-size:13px}
    .meta{display:flex; gap:8px; flex-wrap:wrap; margin-top:6px}
    .tag{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--muted);
    }
    [data-theme="light"] .tag{background:rgba(0,0,0,.03)}
    .projBottom{
      margin-top:auto;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .links{display:flex; gap:8px; flex-wrap:wrap}
    .link{
      padding:8px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--text);
      font-size:13px;
      cursor:pointer;
      display:inline-flex; gap:8px; align-items:center;
      transition: transform .12s ease, background .12s ease;
    }
    [data-theme="light"] .link{background:rgba(0,0,0,.03)}
    .link:hover{transform: translateY(-1px); background:rgba(255,255,255,.10)}
    [data-theme="light"] .link:hover{background:rgba(0,0,0,.06)}
    .empty{
      margin-top:16px;
      padding:16px;
      border-radius:var(--radius);
      border:1px dashed var(--line);
      color:var(--muted);
      background:rgba(255,255,255,.03);
    }

    .box{
      padding:18px;
      border-radius:var(--radius);
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      box-shadow:var(--shadow2);
    }
    [data-theme="light"] .box{background:#fff}
    .skillGrid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
      margin-top:10px;
    }
    .skill{
      padding:12px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
    }
    [data-theme="light"] .skill{background:rgba(0,0,0,.03)}
    .skill b{display:block}
    .skill span{color:var(--muted); font-size:12px}

    .contact{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin-top:10px;
    }

    footer{
      border-top:1px solid var(--line);
      padding:24px 0;
      color:var(--muted);
    }
    .foot{
      display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;
      align-items:center;
    }

    /* dialogs */
    dialog{
      width:min(900px, calc(100% - 24px));
      border:1px solid var(--line);
      border-radius:22px;
      background:var(--panel);
      color:var(--text);
      box-shadow:var(--shadow);
      padding:0;
    }
    dialog::backdrop{
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(2px);
    }

    .modal{display:flex; flex-direction:column;}
    .modalHead{
      padding:16px 16px 10px;
      border-bottom:1px solid var(--line);
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    }
    .modalHead h3{margin:0}

    .modalBody{
      padding:16px;
      display:grid;
      grid-template-columns: 1fr .9fr;
      gap:14px;
      align-items: stretch;
    }

    .modalCol{
      display:flex;
      flex-direction:column;
      gap:12px;
      min-height:0;
    }

    .kv{
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
      background:rgba(255,255,255,.04);
      min-height:0;
    }
    [data-theme="light"] .kv{background:rgba(0,0,0,.03)}
    .kv b{display:block; margin-bottom:8px}
    .kv ul{margin:0; padding-left:18px; color:var(--muted)}

    .kvInfo{ flex:1; }
    .kvStack{ flex:1; }

    .kvImages{
      display:flex;
      flex-direction:column;
    }

    .gallery{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width: 980px){ .gallery{grid-template-columns: repeat(2, 1fr);} }
    @media (max-width: 560px){
      .gallery{grid-template-columns: repeat(2, 1fr);} /* 2x2 = 4 */
      .gItem img{height:110px;}
    }

    .gItem{
      border-radius:14px;
      overflow:hidden;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      cursor:pointer;
      padding:0;
    }
    [data-theme="light"] .gItem{background:rgba(0,0,0,.03)}
    .gItem img{
      width:100%;
      height:120px;
      object-fit:cover;
      display:block;
      transition: transform .15s ease;
    }
    .gItem:hover img{transform: scale(1.03)}
    .galleryEmpty{
      color:var(--muted);
      font-size:13px;
      padding:10px 0 0;
    }

    .galPager{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      margin-top:12px;
      padding-top:10px;
      border-top:1px solid var(--line);
      min-height:22px;
    }
    .galPager.isHidden{
      visibility:hidden;
      opacity:0;
      pointer-events:none;
    }

    .gpDot{
      width:10px;
      height:10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.08);
      cursor:pointer;
      padding:0;
      transition: transform .12s ease, background .12s ease, border-color .12s ease, opacity .12s ease;
    }
    [data-theme="light"] .gpDot{background: rgba(0,0,0,.05)}
    .gpDot:hover{transform: translateY(-1px)}
    .gpDot[aria-current="true"]{
      background: rgba(124,92,255,.35);
      border-color: rgba(124,92,255,.55);
      opacity: 1;
    }
    .gpDot[aria-current="false"]{opacity:.7}

    /* lightbox */
    #lightboxDialog{
      width:min(1100px, calc(100% - 24px));
      background: rgba(12,16,28,.78);
      overflow:hidden;
    }
    [data-theme="light"] #lightboxDialog{
      background: rgba(255,255,255,.90);
    }
    #lightboxDialog::backdrop{
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(2px);
    }
    .lbTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 12px;
      border-bottom:1px solid var(--line);
    }
    .lbTitle{
      color:var(--muted);
      font-size:13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .lbClose{
      border:1px solid var(--line);
      background:rgba(255,255,255,.08);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease;
    }
    [data-theme="light"] .lbClose{background:rgba(0,0,0,.05)}
    .lbClose:hover{transform: translateY(-1px); background:rgba(255,255,255,.14)}
    [data-theme="light"] .lbClose:hover{background:rgba(0,0,0,.08)}

    .lbBody{
      position:relative;
      background:rgba(0,0,0,.20);
      display:flex;
      align-items:center;
      justify-content:center;
      min-height: 260px;
      padding:12px;
    }
    [data-theme="light"] .lbBody{background:rgba(0,0,0,.04)}

    .lbImg{
      max-width:100%;
      max-height: calc(85vh - 110px);
      object-fit:contain;
      display:block;
      border-radius:16px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
    }
    [data-theme="light"] .lbImg{background: rgba(0,0,0,.03)}

    .lbNav{
      position:absolute;
      top:50%;
      transform: translateY(-50%);
      border:1px solid var(--line);
      background:rgba(255,255,255,.08);
      color:var(--text);
      width:42px;
      height:42px;
      border-radius:14px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
      transition: background .12s ease, transform .12s ease;
    }
    [data-theme="light"] .lbNav{background:rgba(0,0,0,.05)}
    .lbNav:hover{background:rgba(255,255,255,.14); transform: translateY(-50%) translateY(-1px);}
    [data-theme="light"] .lbNav:hover{background:rgba(0,0,0,.08)}
    .lbPrev{left:12px}
    .lbNext{right:12px}

    @media (max-width: 980px){
      .heroGrid{grid-template-columns:1fr}
      .grid{grid-template Placed: repeat(2,1fr)}
      .modalBody{grid-template-columns:1fr}
    }
    @media (max-width: 560px){
      .navlinks{display:none}
      .grid{grid-template-columns:1fr}
      .heroStats{grid-template-columns:1fr}
    }
    @media (prefers-reduced-motion: reduce){
      *{transition:none !important; scroll-behavior:auto !important}
    }

    dialog:focus { outline: none; }
    button:focus { outline: none; }
  </style>
</head>

<body>
<a class="skip" href="#projects">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–µ–π—Å–∞–º</a>

<header>
  <div class="container nav" role="navigation" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
    <a class="brand" href="#top" aria-label="–ù–∞ –≥–ª–∞–≤–Ω—É—é">
      <img class="logoImg" src="img/logo.png" alt="hush!k logo" />
      <span>hush!k dev</span>
    </a>

    <nav class="navlinks" aria-label="–†–∞–∑–¥–µ–ª—ã">
      <a href="#projects">–ö–µ–π—Å—ã</a>
      <a href="#stack">–°—Ç–µ–∫</a>
      <a href="#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    </nav>

    <div class="navactions">
      <button class="btn" id="themeBtn" type="button" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåì</button>
    </div>
  </div>
</header>

<main id="top" class="container">
  <section class="hero" aria-label="–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–ª–æ–∫">
    <div class="heroGrid">
      <div class="card heroMain">
        <div class="kicker">
          <span class="pill">Fullstack —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</span>
        </div>

        <h1>hush!k dev</h1>
        <p class="lead">
          –ü—Ä–∏–≤–µ—Ç, —è –∫–æ–¥–µ—Ä —Å –æ–≥—Ä–æ–º–Ω—ã–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã (–±–æ–ª–µ–µ 6 –ª–µ—Ç).<br>
          –ë–µ—Ä—É—Å—å –∑–∞ –ª—é–±—ã–µ –∑–∞–∫–∞–∑—ã (–∫—Ä–æ–º–µ –ª—é—Ç–æ–π —á–µ—Ä–Ω—É—Ö–∏ –ø–æ –†–§/–†–ë).<br>
          –ò–º–µ—é –æ–≥—Ä–æ–º–Ω—É—é —Ä–µ–ø—É—Ç–∞—Ü–∏—é –Ω–∞ —Ñ–æ—Ä—É–º–∞—Ö –∏ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤.
        </p>

        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <a class="btn primary" href="#projects">üöÄ –ú–æ–∏ –∫–µ–π—Å—ã</a>
        </div>

        <div class="heroStats" aria-label="–ö–ª—é—á–µ–≤—ã–µ —Ü–∏—Ñ—Ä—ã">
          <div class="stat"><b>1000+</b><span>–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç</span></div>
          <div class="stat"><b>6+ –ª–µ—Ç</b><span>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</span></div>
          <div class="stat"><b>10:00 - 21:00</b><span>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã</span></div>
        </div>
      </div>

      <aside class="card heroSide" aria-label="–ö–æ—Ä–æ—Ç–∫–æ –æ–±–æ –º–Ω–µ">
        <div class="mini">
          <h3>–ß—Ç–æ –¥–µ–ª–∞—é</h3>
          <p>–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é –∞–±—Å–æ–ª—é—Ç–Ω–æ –ª—é–±—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ–¥ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö —Ä–∞–±–æ—Ç—ã.</p>
        </div>
        <div class="mini">
          <h3>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é</h3>
          <p>–†–∞–±–æ—Ç–∞—é –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≥–∞—Ä–∞–Ω—Ç –±–æ—Ç—ã —Ç–∞–∫–∏–µ –∫–∞–∫: –ª–æ–ª–∑, –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–ª—å, –≥—Ä–∏–¥–∏, –≥–µ—Ç, —Ñ–æ—Ä—É–º–Ω—ã—Ö –≥–∞—Ä–∞–Ω—Ç–æ–≤. –õ–∏–±–æ 30/70 –µ—Å–ª–∏ –≤–∞–º –Ω–µ—É–¥–æ–±–µ–Ω –≥–∞—Ä–∞–Ω—Ç.</p>
        </div>
        <div class="mini">
          <h3>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã</h3>
          <p>–ü–∞—Ä—Å–µ—Ä—ã, –ë–æ—Ç—ã, –ß–µ–∫–µ—Ä—ã, –ê–≤—Ç–æ–ø–æ—Å—Ç, –õ–µ–Ω–¥–∏–Ω–≥–∏, –§–∏—à–∏–Ω–≥, –ö–æ–ø–∏–∏ —Å–∞–π—Ç–æ–≤, –†–∞—Ç–Ω–∏–∫–∏, –°—Ç–∏–ª–ª–µ—Ä—ã, –°–ø–∞–º–µ—Ä—ã, –ë—Ä—É—Ç–µ—Ä—ã, –î—Ä–µ–π–Ω–µ—Ä—ã, obf/crypt</p>
        </div>
      </aside>
    </div>
  </section>

  <section id="projects" aria-label="–ö–µ–π—Å—ã">
    <div class="sectionHead">
      <div>
        <h2>–ö–µ–π—Å—ã</h2>
        <p>–ù–∏–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –º–æ–∏–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏</p>
      </div>
    </div>

    <div class="toolbar" role="region" aria-label="–ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤">
      <div class="search" role="search">
        <span aria-hidden="true">üîé</span>
        <input id="q" type="search" placeholder="–ü–æ–∏—Å–∫: –±–æ—Ç, –ª–µ–Ω–¥–∏–Ω–≥..." autocomplete="off" />
      </div>
      <div class="filters" id="filters" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏"></div>
    </div>

    <div id="grid" class="grid" aria-live="polite"></div>
    <div id="empty" class="empty" hidden>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</div>
    <div id="loadError" class="empty" hidden>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–µ–π—Å—ã. –ü—Ä–æ–≤–µ—Ä—å <code>projects.json</code> –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä.</div>
  </section>

  <section id="stack" aria-label="–°—Ç–µ–∫">
    <div class="sectionHead">
      <div>
        <h2>–°—Ç–µ–∫ –∏ –Ω–∞–≤—ã–∫–∏</h2>
        <p>–ù–∏–∂–µ –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ç–µ–º, –∫–∞–∫–∏–µ –Ø–ü –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ —è –∏—Å–ø–æ–ª—å–∑—É—é</p>
      </div>
    </div>

    <div class="box">
      <div class="skillGrid">
        <div class="skill"><b>Technologies</b><span>OOP, Web, Desktop, Mobile, Web3</span></div>
        <div class="skill"><b>Languages</b><span>Python, NodeJS, C++, C#, Java, Kotlin, Swift, JS</span></div>
        <div class="skill"><b>Databases</b><span>SQL, MongoDB, Elastic, RabbitMQ, Redis</span></div>
        <div class="skill"><b>DevOps</b><span>Nginx, Apache, iptables, f2b, Docker, k8s, Vagrant, CI/CD</span></div>
      </div>
    </div>
  </section>

  <section id="contact" aria-label="–ö–æ–Ω—Ç–∞–∫—Ç—ã">
    <div class="sectionHead">
      <div>
        <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <p>–í—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—è–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã! –ú–Ω–æ–≥–æ —Ñ–µ–π–∫–æ–≤.</p>
      </div>
    </div>

    <div class="box">
      <div class="contact">
        <a class="btn primary" href="https://t.me/hush1k_coder">üí¨ Telegram</a>
        <a class="btn" href="https://t.me/hush1k_info">üë• Channel</a>
        <a class="btn" href="https://t.me/hush1k_rep">üì£ Reputation</a>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="container foot">
    <span>¬© hush!k - –∑–æ–µ–±–∏—Å—å –∫–æ–¥–µ–µ—Ä))</span>
  </div>
</footer>

<!-- CASE DIALOG -->
<dialog id="caseDialog" aria-labelledby="caseTitle">
  <div class="modal">
    <div class="modalHead">
      <div>
        <h3 id="caseTitle">–ö–µ–π—Å</h3>
        <div class="meta" id="caseMeta"></div>
      </div>
      <button class="btn" id="closeDialogBtn" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
    </div>

    <div class="modalBody">
      <div class="modalCol left">
        <div class="kv kvDesc">
          <b>–û–ø–∏—Å–∞–Ω–∏–µ –∫–µ–π—Å–∞</b>
          <ul id="caseDescription"></ul>
        </div>

        <div class="kv kvInfo">
          <b>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</b>
          <ul id="caseInfo"></ul>
        </div>
      </div>

      <div class="modalCol right">
        <div class="kv kvImages">
          <b>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</b>
          <div id="caseImages" class="gallery"></div>
          <div id="caseGalleryPager" class="galPager isHidden"></div>
        </div>

        <div class="kv kvStack">
          <b>–°—Ç–µ–∫</b>
          <div class="meta" id="caseStack"></div>
        </div>
      </div>
    </div>
  </div>
</dialog>

<!-- LIGHTBOX -->
<dialog id="lightboxDialog" aria-label="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π">
  <div class="lbTop">
    <div class="lbTitle" id="lbTitle">1 / 1</div>
    <button class="lbClose" id="lbClose" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
  </div>

  <div class="lbBody" id="lbBody">
    <button class="lbNav lbPrev" id="lbPrev" type="button" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ">‚Äπ</button>
    <img class="lbImg" id="lbImg" alt="">
    <button class="lbNav lbNext" id="lbNext" type="button" aria-label="–°–ª–µ–¥—É—é—â–µ–µ">‚Ä∫</button>
  </div>
</dialog>

<script>
  const $ = (sel, root=document) => root.querySelector(sel);
  const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];

  const escapeHtml = (str) =>
    String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");

  function normalizeImages(images){
    if (!images || !Array.isArray(images) || images.length === 0) return [];
    return images.map(img => {
      if (typeof img === "string") return { src: img, alt: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–µ–π—Å–∞" };
      return { src: img?.src, alt: img?.alt || "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–µ–π—Å–∞" };
    }).filter(x => x && x.src);
  }

  let projects = [];
  let categoryMap = {};

  async function loadProjects(){
    try{
      const res = await fetch("projects.json", { cache: "no-store" });
      if (!res.ok) throw new Error("HTTP " + res.status);
      const data = await res.json();

      if (!data || typeof data !== "object") throw new Error("projects.json –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–æ–º");
      if (!Array.isArray(data.projects)) throw new Error("projects.json: –ø–æ–ª–µ projects –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∞—Å—Å–∏–≤–æ–º");
      if (data.categories && typeof data.categories !== "object") throw new Error("projects.json: categories –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–æ–º");

      projects = data.projects;
      categoryMap = data.categories || {};

      for (const p of projects){
        const k = String(p?.category || "");
        if (k && !categoryMap[k]) categoryMap[k] = k;
      }

      $("#loadError").hidden = true;
      render();
    }catch(err){
      console.error("Failed to load projects.json:", err);
      projects = [];
      categoryMap = {};
      $("#grid").innerHTML = "";
      $("#empty").hidden = true;
      $("#loadError").hidden = false;
    }
  }

  const state = { q: "", cat: "all", filtered: [] };

  function labelForCategory(cat){
    return categoryMap[cat] || cat;
  }

  function matchesQuery(p, qLower){
    if (!qLower) return true;
    const hay = [
      p.title, p.summary, p.category,
      ...(p.stack || []),
      ...(p.description || []),
      ...(p.solution || [])
    ].join(" ").toLowerCase();
    return hay.includes(qLower);
  }

  function getAllCategories(){
    const set = new Set();
    for (const p of projects){
      if (p?.category) set.add(String(p.category));
    }
    return [...set].sort((a,b) => labelForCategory(a).localeCompare(labelForCategory(b), "ru"));
  }

  function buildCategoryCountsByQuery(){
    const qLower = state.q.trim().toLowerCase();
    const counts = Object.create(null);
    let total = 0;

    for (const p of projects){
      if (!p?.category) continue;
      if (!matchesQuery(p, qLower)) continue;
      total++;
      const c = String(p.category);
      counts[c] = (counts[c] || 0) + 1;
    }
    return { counts, total };
  }

  const filtersRoot = $("#filters");

  function renderFilters(){
    const cats = getAllCategories();
    const { counts, total } = buildCategoryCountsByQuery();

    if (state.cat !== "all" && !cats.includes(state.cat)) state.cat = "all";

    const btnAll = `
      <button class="chipBtn" type="button" data-cat="all" aria-pressed="${state.cat === "all"}">
        –í—Å–µ <span class="chipCount">${total}</span>
      </button>
    `;

    const btns = cats.map(cat => {
      const cnt = counts[cat] || 0;
      return `
        <button class="chipBtn" type="button" data-cat="${escapeHtml(cat)}" aria-pressed="${state.cat === cat}">
          ${escapeHtml(labelForCategory(cat))} <span class="chipCount">${cnt}</span>
        </button>
      `;
    }).join("");

    filtersRoot.innerHTML = btnAll + btns;

    $$(".chipBtn", filtersRoot).forEach(btn => {
      btn.addEventListener("click", () => {
        $$(".chipBtn", filtersRoot).forEach(b => b.setAttribute("aria-pressed", "false"));
        btn.setAttribute("aria-pressed", "true");
        state.cat = btn.dataset.cat;
        renderGridOnly();
      });
    });
  }

  const grid = $("#grid");
  const empty = $("#empty");

  function projectCard(p, index){
    const tags = [
      `<span class="tag">${escapeHtml(labelForCategory(p.category))}</span>`,
      ...(p.stack || []).slice(0,2).map(s => `<span class="tag">${escapeHtml(s)}</span>`)
    ].join("");

    return `
      <article class="proj" aria-label="–ö–µ–π—Å: ${escapeHtml(p.title)}">
        <div class="projTop">
          <div>
            <h3>${escapeHtml(p.title)}</h3>
            <p>${escapeHtml(p.summary || "")}</p>
            <div class="meta" aria-label="–¢–µ–≥–∏">${tags}</div>
          </div>
        </div>
        <div class="projBottom">
          <div class="links">
            <button class="link" type="button" data-open="${index}">üìå –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è</button>
          </div>
        </div>
      </article>
    `;
  }

  function applyFilters(){
    const qLower = state.q.trim().toLowerCase();
    let items = projects.slice();

    if (state.cat !== "all") items = items.filter(p => p.category === state.cat);
    if (qLower) items = items.filter(p => matchesQuery(p, qLower));

    state.filtered = items;
  }

  function renderGridOnly(){
    applyFilters();
    const items = state.filtered;

    grid.innerHTML = items.map((p, idx) => projectCard(p, idx)).join("");
    empty.hidden = items.length > 0;

    $$("[data-open]", grid).forEach(btn => {
      btn.addEventListener("click", () => openCase(Number(btn.dataset.open)));
    });
  }

  function render(){
    renderFilters();
    renderGridOnly();
  }

  // ===== Case modal & gallery pagination =====
  const caseDlg = $("#caseDialog");
  const caseImagesHolder = $("#caseImages");
  const pager = $("#caseGalleryPager");

  let GALLERY_PER_PAGE = getGalleryPerPage();
  const DESKTOP_PER_PAGE = 3;
  const MOBILE_PER_PAGE = 4;

  function getGalleryPerPage(){
    return window.matchMedia("(max-width: 560px)").matches ? MOBILE_PER_PAGE : DESKTOP_PER_PAGE;
  }

  let galleryAll = [];
  let galleryPage = 0;
  let galleryCaseTitle = "–ö–µ–π—Å";

  function galleryTotalPages(){
    return Math.max(1, Math.ceil(galleryAll.length / GALLERY_PER_PAGE));
  }

  function renderDots(){
    const pages = galleryTotalPages();

    if (pages <= 1){
      pager.classList.add("isHidden");
      pager.innerHTML = "";
      return;
    }

    pager.classList.remove("isHidden");
    pager.innerHTML = Array.from({length: pages}).map((_, i) => `
      <button
        class="gpDot"
        type="button"
        aria-label="–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${i + 1}"
        aria-current="${i === galleryPage}"
        data-page="${i}"
      ></button>
    `).join("");

    $$("[data-page]", pager).forEach(btn => {
      btn.addEventListener("click", () => {
        galleryPage = Number(btn.dataset.page);
        renderGalleryPage();
      });
    });
  }

  function renderGalleryPage(){
    const total = galleryAll.length;

    if (total === 0){
      caseImagesHolder.innerHTML = `<div class="galleryEmpty">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.</div>`;
      pager.classList.add("isHidden");
      pager.innerHTML = "";
      return;
    }

    const pages = galleryTotalPages();
    galleryPage = Math.min(Math.max(0, galleryPage), pages - 1);

    const start = galleryPage * GALLERY_PER_PAGE;
    const end = start + GALLERY_PER_PAGE;
    const slice = galleryAll.slice(start, end);

    caseImagesHolder.innerHTML = slice.map((i, localIdx) => {
      const globalIdx = start + localIdx;
      return `
        <button class="gItem" type="button" data-img-index="${globalIdx}" aria-label="${escapeHtml(i.alt)}">
          <img src="${escapeHtml(i.src)}" alt="${escapeHtml(i.alt)}" loading="lazy">
        </button>
      `;
    }).join("");

    $$("[data-img-index]", caseImagesHolder).forEach(btn => {
      btn.addEventListener("click", () => {
        const startIndex = Number(btn.dataset.imgIndex);
        openLightbox(galleryAll, startIndex, galleryCaseTitle);
      });
    });

    renderDots();
    $$("[data-page]", pager).forEach(dot => {
      dot.setAttribute("aria-current", String(Number(dot.dataset.page) === galleryPage));
    });
  }

  function onGalleryLayoutChange(){
    const next = getGalleryPerPage();
    if (next === GALLERY_PER_PAGE) return;

    const firstIndex = galleryPage * GALLERY_PER_PAGE;
    GALLERY_PER_PAGE = next;

    galleryPage = Math.floor(firstIndex / GALLERY_PER_PAGE);
    renderGalleryPage();
  }

  window.addEventListener("resize", () => {
    if (!caseDlg.open) return;
    onGalleryLayoutChange();
  });

  function openCase(index){
    const p = state.filtered[index];
    if (!p) return;

    $("#caseTitle").textContent = p.title || "–ö–µ–π—Å";
    $("#caseMeta").innerHTML = `<span class="tag">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${escapeHtml(labelForCategory(p.category))}</span>`;

    $("#caseDescription").innerHTML = (p.description || []).map(x => `<li>${escapeHtml(x)}</li>`).join("");
    $("#caseInfo").innerHTML = (p.solution || []).map(x => `<li>${escapeHtml(x)}</li>`).join("");
    $("#caseStack").innerHTML = (p.stack || []).map(s => `<span class="tag">${escapeHtml(s)}</span>`).join("");

    galleryAll = normalizeImages(p.images);
    galleryPage = 0;
    galleryCaseTitle = p.title || "–ö–µ–π—Å";

    GALLERY_PER_PAGE = getGalleryPerPage();
    renderGalleryPage();

    caseDlg.showModal();
    $("#closeDialogBtn").focus();
  }

  function closeCase(){ caseDlg.close(); }
  $("#closeDialogBtn").addEventListener("click", closeCase);

  caseDlg.addEventListener("click", (e) => {
    const rect = caseDlg.getBoundingClientRect();
    const inDialog = (
      e.clientX >= rect.left && e.clientX <= rect.right &&
      e.clientY >= rect.top  && e.clientY <= rect.bottom
    );
    if (!inDialog) closeCase();
  });

  // ===== Lightbox =====
  const lbDlg = $("#lightboxDialog");
  const lbImg = $("#lbImg");
  const lbTitle = $("#lbTitle");
  const lbClose = $("#lbClose");
  const lbPrev = $("#lbPrev");
  const lbNext = $("#lbNext");
  const lbBody = $("#lbBody");

  let lbImages = [];
  let lbIndex = 0;
  let lbCaseTitle = "–ö–µ–π—Å";

  function setLb(index){
    const total = lbImages.length;
    if (!total) return;

    lbIndex = (index + total) % total;
    const it = lbImages[lbIndex];

    lbImg.src = it.src;
    lbImg.alt = it.alt || "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ";
    lbTitle.textContent = `${lbCaseTitle} ‚Äî ${lbIndex + 1} / ${total}`;

    const showNav = total > 1;
    lbPrev.style.display = showNav ? "" : "none";
    lbNext.style.display = showNav ? "" : "none";
  }

  function openLightbox(images, startIndex, caseTitle){
    lbImages = images.slice();
    lbIndex = startIndex || 0;
    lbCaseTitle = caseTitle || "–ö–µ–π—Å";
    setLb(lbIndex);
    lbDlg.showModal();
    lbClose.focus();
  }

  function closeLightbox(){
    lbDlg.close();
    lbImages = [];
    const closeBtn = document.querySelector("#closeDialogBtn");
    if (closeBtn) closeBtn.focus();
  }

  lbClose.addEventListener("click", closeLightbox);
  lbPrev.addEventListener("click", () => setLb(lbIndex - 1));
  lbNext.addEventListener("click", () => setLb(lbIndex + 1));

  lbDlg.addEventListener("click", (e) => {
    const rect = lbDlg.getBoundingClientRect();
    const inDialog = (
      e.clientX >= rect.left && e.clientX <= rect.right &&
      e.clientY >= rect.top  && e.clientY <= rect.bottom
    );
    if (!inDialog) closeLightbox();
  });

  (function attachSwipe(){
    let startX = 0, startY = 0, touching = false;

    lbBody.addEventListener("touchstart", (e) => {
      const t = e.touches[0];
      startX = t.clientX;
      startY = t.clientY;
      touching = true;
    }, {passive:true});

    lbBody.addEventListener("touchend", (e) => {
      if (!touching || lbImages.length < 2) return;
      touching = false;

      const t = e.changedTouches[0];
      const dx = t.clientX - startX;
      const dy = t.clientY - startY;

      if (Math.abs(dx) > 45 && Math.abs(dx) > Math.abs(dy)){
        if (dx < 0) setLb(lbIndex + 1);
        else setLb(lbIndex - 1);
      }
    }, {passive:true});
  })();

  document.addEventListener("keydown", (e) => {
    if (lbDlg.open){
      if (e.key === "Escape") return closeLightbox();
      if (e.key === "ArrowLeft") return setLb(lbIndex - 1);
      if (e.key === "ArrowRight") return setLb(lbIndex + 1);
      return;
    }
    if (caseDlg.open && e.key === "Escape") closeCase();
  });

  // search
  $("#q").addEventListener("input", (e) => {
    state.q = e.target.value;
    render();
  });

  // theme
  const themeBtn = $("#themeBtn");
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme) document.documentElement.setAttribute("data-theme", savedTheme);

  themeBtn.addEventListener("click", () => {
    const cur = document.documentElement.getAttribute("data-theme") || "dark";
    const next = (cur === "dark") ? "light" : "dark";
    document.documentElement.setAttribute("data-theme", next);
    localStorage.setItem("theme", next);
  });

  loadProjects();
</script>
</body>
</html>
